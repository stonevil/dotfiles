{{- /*
	vim:ft=toml.gotexttmpl
*/ -}}

# Detect desktop OR laptop. And OS theme
{{ $chassisType := "desktop" }}
{{ if eq .chezmoi.os "darwin" }}
	{{ if contains "Yes" (output  "/usr/sbin/ioreg" "-c" "AppleSmartBattery" "-r" "|" "awk" "'/built-in/" "{print $3}'") }}
		{{ $chassisType := "laptop" }}
	{{ else }}
		{{ $chassisType := "desktop" }}
	{{ end }}
{{ else if eq .chezmoi.os "linux" }}
	{{ if lookPath "hostnamectl" }}
		{{ if contains "systemd" (output "ps" "-aux") }}
			{{ $chassisType := (output "hostnamectl" "--json=short" | mustFromJson).Chassis }}
		{{ else }}
			{{ $chassisType := "desktop" }}
		{{ end }}
	{{ else }}
		{{ $chassisType := "desktop" }}
	{{ end }}
{{ end }}

{{ $themeName := "catppuccin" }}
{{ $themeVariant := "mocha" }}
{{ $plasma := false }}
{{ $hyprland := false }}
{{ $fwupd := false }}

{{ $ownership := (promptStringOnce . "Ownership" "Private or company property" "private") | quote }}
{{ $uname := (promptStringOnce . "Full Name" "What is your full name" "fubar") | quote }}
{{ $email := (promptStringOnce . "email" "What is your email address" "fu@bar.org") | quote }}

{{ $themeName = promptChoice "Choose Theme" (list "catppuccin" "rose-pine") "catppuccin" }}
{{ if eq $themeName "catppuccin" }}
	{{ $themeVariant = promptChoice "Theme Variant" (list "mocha" "macchiato" "latte" "frappe") "mocha" }}
{{ else if eq $themeName "rose-pine" }}
	{{ $themeVariant = promptChoice "Theme mode" (list "default" "moon" "dawn") }}
{{ end }}
{{ $themeBlackout := promptBool "Do you want to complete black theme background" true }}

{{ $neovim := promptBool "NeoVIM IDE" false }}
{{ $terminalMultiplexer := promptBool "Terminal Mutiplexer, like TMUX" false }}
{{ $devCore := promptBool "DEV Core CLI tools" false }}
{{ $limaVm := promptBool "Lima-VM CLI tools" false }}
{{ $k8sCli := promptBool "K8S CLI tools" false }}
{{ $espCli := promptBool "ESP DEV tools" false }}
{{ $mailCli := promptBool "Mail CLI tools" false }}
{{ $mediaCli := promptBool "Media CLI tools" false }}
{{ $newsCli := promptBool "News CLI tools" false }}
{{ $dekCli := promptBool "TUI presentation tools" false }}
{{ $adsCli := promptBool "Ads block CLI tools" false }}

{{ $tabs := promptInt "Default tabs width" 2 }}
{{ $shellPath := (promptString "Path to shell" "/bin/zsh") | quote }}
{{ $opacity := promptString "Windows opacity, choose between 0.1 and 1.0" "1.0" }}

{{ if eq .chezmoi.os "linux" }}
	{{ $fwupd = promptBool "Linux update hardware firmware service" false }}

	{{ $plasma = promptBool "KDE Plasma DE" false }}
	{{ $hyprland = promptBool "Hyprland DE" false }}
{{ end }}
{{ $terminalEmulators := promptBool "GUI Terminal Emulators, like WezTerm" false }}
{{ $dev := promptBool "DEV apps" false }}
{{ $mail := promptBool "Mail apps" false }}
{{ $media := promptBool "Media apps" false }}
{{ $modeling := promptBool "3D modeling apps" false }}
{{ $graphics := promptBool "Graphics apps" false }}

[data]
	email = {{ $email }}
	uname = {{ $uname }}
	ownership = {{ $ownership }}

[data.tags]
	asus = false
	thinkpad = false
	core = true
	neovim = {{ $neovim }}
	terminalMultiplexer = {{ $terminalMultiplexer }}
	devCore = {{ $devCore }}
	dev = {{ $dev }}
	limaVm = {{ $limaVm }}
	k8sCli = {{ $k8sCli }}
	mailCli = {{ $mailCli }}
	mail = {{ $mail }}
	media = {{ $media }}
	mediaCli = {{ $mediaCli }}
	newsCli = {{ $newsCli }}
	dekCli = {{ $dekCli }}
	espCli = {{ $espCli }}
	adsCli = {{ $adsCli }}
	modeling = {{ $modeling }}
	graphics = {{ $graphics }}
	plasma = {{ $plasma }}
	hyprland = {{ $hyprland }}
	terminalEmulators = {{ $terminalEmulators }}
	fwupd = {{ $fwupd }}
	hashicorpCli = false
	fonts = false
	python3 = false
	lua = false
	go = false
	rust = false
	ruby = false
	nodejs = false
	gitCli = false
	books = false
	displayManager = false
	networkCli = false
	print = false
	sync = false
	tor = false
	utilsCli = false
	virtCli = false
	virt = false

[data.steps]
	upgrade = false

[data.terminal]
	fontsList = ["FiraCode", "Iosevka", "Monoid", "ProggyClean", "RobotoMono", "ZedMono",]
	font = "Iosevka Nerd Font"
	fontNormal = "Light"
	fontBold = "Light"
	fontItalic = "Light Italic"
	fontBoldItalic = "Light Italic"
	fontSize = 15
	fontBoldBright = true
	cols = 120
	rows = 28
	tabs = {{ $tabs }}
	shellPath = {{ $shellPath }}
	opacity = {{ $opacity }}
{{ if lt ($opacity | float64) 1.0 }}
	blur = 20
{{ else }}
	blur = 0
{{ end}}

[data.theme]
	themeName = {{ $themeName | quote }}
	themeVariant = {{ $themeVariant | quote }}
	themeBlackout = {{ $themeBlackout }}
{{ if or ($themeBlackout) (eq $themeVariant "mocha") (eq $themeVariant "macchiato") (eq $themeVariant "dark") (eq $themeVariant "moon") }}
	themeDarkMode = true
{{ end }}

[data.fonts]
{{ if eq .chezmoi.os "darwin" }}
	fontDir = {{ (joinPath .chezmoi.homeDir "Library/Fonts") | quote }}
{{ else if eq .chezmoi.os "linux" }}
	fontDir = {{ (joinPath .chezmoi.homeDir ".local/share/fonts") | quote }}
{{ end }}

{{ if eq .chezmoi.os "darwin" }}
[data.path]
	homebrew = {{ (joinPath .chezmoi.homeDir ".brew" | quote) }}
{{ end }}
