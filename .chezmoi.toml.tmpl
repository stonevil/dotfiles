# vim:ft=go

[scriptEnv]
	SOFTWARE_DOWNLOAD_CMD="curl --connect-timeout 300 --retry 5 --retry-delay 20 --silent --insecure --location"

{{ $email := promptStringOnce . "email" "What is your email address" "fu@bar.org" }}
{{ $workstation := promptBoolOnce . "workstation" "Is this workstation?" false }}
{{ $tabs := promptIntOnce . "tabs" "Configure default tabs width" 2 }}

[data]
	workstation = {{ $workstation }}
	email = {{ $email | quote }}

[data.tui]
	tabs = {{ $tabs }}

[data.terminal]
	font = "Iosevka Nerd Font"

[data.terminal.hdpi]
  fontsize = 15

[data.wezterm.fhd]
  fontsize = 16

[data.libc]
{{ if (and (eq .chezmoi.os "linux") (eq .chezmoi.osRelease.id "alpine")) }}
	platform = "musl"
{{ else }}
	platform = "gnu"
{{ end }}

[data.arch]
{{ if eq .chezmoi.arch "amd64" }}
	opt1 = "{{ .chezmoi.arch }}"
	opt2 = "x86_64"
{{ else if eq .chezmoi.arch "arm64" }}
	opt1 = "{{ .chezmoi.arch }}"
	opt2 = "aarch64"
{{ end }}

[data.tools.fzf]
	version = "{{ output "curl" "-fsSL" "-o" "/dev/null" "-w" "%{url_effective}" "https://github.com/junegunn/fzf/releases/latest" | trim | base }}"

[data.tools.bat]
	version = "{{ output "curl" "-fsSL" "-o" "/dev/null" "-w" "%{url_effective}" "https://github.com/sharkdp/bat/releases/latest" | trim | base | trimPrefix "v" }}"

[data.tools.chezmoi]
	version = "{{ output "curl" "-fsSL" "-o" "/dev/null" "-w" "%{url_effective}" "https://github.com/twpayne/chezmoi/releases/latest" | trim | base | trimPrefix "v" }}"

[data.tools.helm]
	version = "{{ output "curl" "-fsSL" "-o" "/dev/null" "-w" "%{url_effective}" "https://github.com/helm/helm/releases/latest" | trim | base | trimPrefix "v" }}"

[data.tools.rke]
	version = "{{ output "curl" "-fsSL" "-o" "/dev/null" "-w" "%{url_effective}" "https://github.com/rancher/rke/releases/latest" | trim | base | trimPrefix "v" }}"

[data.tools.limactl]
	version = "{{ output "curl" "-fsSL" "-o" "/dev/null" "-w" "%{url_effective}" "https://github.com/lima-vm/lima/releases/latest" | trim | base | trimPrefix "v" }}"

[data.tools.kubectl]
	version = "1.26.2"

[data.tools.krew]
	version = "{{ output "curl" "-fsSL" "-o" "/dev/null" "-w" "%{url_effective}" "https://github.com/kubernetes-sigs/krew/releases/latest" | trim | base | trimPrefix "v" }}"

[data.tools.terraform]
	version = "{{ output "curl" "-fsSL" "-o" "/dev/null" "-w" "%{url_effective}" "https://github.com/hashicorp/terraform/releases/latest" | trim | base | trimPrefix "v" }}"

[data.tools.packer]
	version = "{{ output "curl" "-fsSL" "-o" "/dev/null" "-w" "%{url_effective}" "https://github.com/hashicorp/packer/releases/latest" | trim | base | trimPrefix "v" }}"

[data.tools.vagrant]
	version = "{{ output "curl" "-fsSL" "-o" "/dev/null" "-w" "%{url_effective}" "https://github.com/hashicorp/vagrant/releases/latest" | trim | base | trimPrefix "v" }}"

[data.tools.vault]
	version = "{{ output "curl" "-fsSL" "-o" "/dev/null" "-w" "%{url_effective}" "https://github.com/hashicorp/vault/releases/latest" | trim | base | trimPrefix "v" }}"

[data.tools.consul]
	version = "{{ output "curl" "-fsSL" "-o" "/dev/null" "-w" "%{url_effective}" "https://github.com/hashicorp/consul/releases/latest" | trim | base | trimPrefix "v" }}"

{{- writeToStdout "email address is: " $email "\n" -}}
{{ if $workstation }}
	{{- writeToStdout "is workstation?: true\n" -}}
{{ else }}
	{{- writeToStdout "is workstation?: false\n" -}}
{{ end }}
