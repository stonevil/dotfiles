#!/usr/bin/env sh
# vim:ft=go

#Â npm.modules hash: {{ include ".packagefiles/npm.modules" | sha256sum }}

cd "$HOME" || exit 1

if command -v npm >/dev/null; then
	echo "Install NodeJS modules"
	if [[ -f {{ joinPath .chezmoi.sourceDir ".packagefiles/npm.modules" | quote }} ]] && [[ -s {{ joinPath .chezmoi.sourceDir ".packagefiles/npm.modules" | quote }} ]]; then
		npm config set prefix "$HOME"/.local/npm-packages
		export NPM_PACKAGES="$HOME"/.local/npm-packages
		xargs <{{ joinPath .chezmoi.sourceDir ".packagefiles/npm.modules" | quote }} npm install -g
	fi
fi
