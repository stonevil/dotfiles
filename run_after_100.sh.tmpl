#!/usr/bin/env sh
# vim:ft=go

cd "$HOME" || exit 1

if command -v nvim >/dev/null; then
	echo "Lazy NeoVim update..."
	nvim --headless "+Lazy! sync" +qall! || exit 1
else
	exit 1
fi

{{ if eq .chezmoi.os "darwin" }}
	brew cleanup --quiet --prune=30 && brew autoremove
{{ else if eq .chezmoi.os "linux" }}
	{{ if eq .chezmoi.osRelease.id "debian" }}
		sudo apt autoremove -y || exit 1
	{{ else if eq .chezmoi.osRelease.id "arch" }}
	{{ else if eq .chezmoi.osRelease.id "alpine" }}
	{{ else if eq .chezmoi.osRelease.id "fedora" }}
	{{ end }}
{{ end }}
